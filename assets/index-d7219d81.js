(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();function p(){let n=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",n+"px")}window.addEventListener("DOMContentLoaded",p);window.addEventListener("resize",p);window.addEventListener("orientationchange",p);document.getElementById("SquaresButton");document.getElementById("i_controlSquares");const L=document.getElementById("sPresetSelect");L.onchange=function(){q(L.value)};let u,m=[],f,e=[],w,g,v,d,i=[],c;function C(){A(),u=new AudioContext,f=u.createGain(),f.connect(u.destination),f.gain.value=1,g=new Float32Array([0,0,1,0,1]),v=new Float32Array(g.length),w=u.createPeriodicWave(v,g);for(let n=0;n<9;n++)m[n]={}}function q(n){switch(u===void 0&&C(),n){case"":break;case"soundbank.json":S(n);break;case"sine":c="sine",l();break;case"square":c="square",l();break;case"sawtooth":c="sawtooth",l();break;case"triangle":c="triangle",l();break;case"custom":c="custom",l();break}}function l(){e.length<88&&A(),B(100),y(),G()}function S(n){d.length=0;let t=new XMLHttpRequest;try{t=new XMLHttpRequest}catch{}t.onreadystatechange=function(){if(t.readyState==4){if(d=JSON.parse(t.responseText),d.sources.length==0)return;B(d.grid),y();for(let r=0;r<d.sources.length;r++)F(d.sources[r])}},t.open("GET",n,!0),t.send()}function B(n){let t=document.getElementById("sBox");t.innerHTML="",i.length=0;for(let r=0;r<n;r++){let s=document.createElement("button");s.className="soundSquareButton",s.id="soundButton"+r,i.push(s),t.appendChild(s)}}function y(){let n=$("#sContents").css("height");$("#sBox").css("height",n),$("#sBox").css("width",n);let t=0;i.length==1?t=100:t=100/Math.sqrt(i.length),$(".soundSquareButton").css("height",t+"%"),$(".soundSquareButton").css("width",t+"%")}function F(n){let t=[];for(let s=0;s<n.instances;s++){let o=document.createElement("audio");o.src=n.src,t.push(o)}u.createMediaElementSource(t[t.length-1]).connect(u.destination),i[n.index].className="soundSquareButton",i[n.index].id="soundButton"+n.index,i[n.index].innerHTML=n.name,i[n.index].style.backgroundColor=n.color,i[n.index].addEventListener("click",function(){if(u.state==="suspended"){u.resume();for(let s=0;s<t.length;s++)if(t[s].paused){t[s].play();break}}else for(let s=0;s<t.length;s++)if(t[s].paused){t[s].play();break}},!1)}function G(){if(i.length<88)return;let n=0;e.forEach(function(t,r){Object.entries(t).forEach(function(o){i[n].className="soundSquareButton",i[n].id="soundButton"+n,i[n].innerHTML=o[0]+"/"+r,i[n].dataset.octave=r.toString(),i[n].dataset.note=o[0],i[n].dataset.frequency=o[1].toString(),i[n].addEventListener("mouseover",b,!1),i[n].addEventListener("mouseleave",x,!1),n++})})}function D(n){let t=u.createOscillator();return t.connect(f),c=="custom"?t.setPeriodicWave(w):t.type=c,t.frequency.value=n,t.start(),t}let E=!1;document.body.onmousedown=function(){E=!0};document.body.onmouseup=function(){E=!1};function b(n){let t=n.target.dataset;if(E&&!t.pressed){let r=+t.octave;m[r][t.note]=D(t.frequency),t.pressed="yes",t.state="selected"}}function x(n){let t=n.target.dataset;if(t&&t.pressed){let r=+t.octave;m[r][t.note].stop(),delete m[r][t.note],delete t.pressed,delete t.state}}function A(){e=[];for(let n=0;n<9;n++)e[n]=[];e[0].A=27.5,e[0]["A#"]=29.135,e[0].B=30.868,e[1].C=32.703,e[1]["C#"]=34.648,e[1].D=36.708,e[1]["D#"]=38.891,e[1].E=41.203,e[1].F=43.654,e[1]["F#"]=46.249,e[1].G=48.999,e[1]["G#"]=51.913,e[1].A=55,e[1]["A#"]=58.27,e[1].B=61.735,e[2].C=65.406,e[2]["C#"]=69.296,e[2].D=73.416,e[2]["D#"]=77.782,e[2].E=82.407,e[2].F=87.307,e[2]["F#"]=92.499,e[2].G=97.999,e[2]["G#"]=103.826,e[2].A=110,e[2]["A#"]=116.541,e[2].B=123.471,e[3].C=130.813,e[3]["C#"]=138.591,e[3].D=146.832,e[3]["D#"]=155.563,e[3].E=164.814,e[3].F=174.614,e[3]["F#"]=184.997,e[3].G=195.998,e[3]["G#"]=207.652,e[3].A=220,e[3]["A#"]=233.082,e[3].B=246.942,e[4].C=261.626,e[4]["C#"]=277.183,e[4].D=293.665,e[4]["D#"]=311.127,e[4].E=329.628,e[4].F=349.228,e[4]["F#"]=369.994,e[4].G=391.995,e[4]["G#"]=415.305,e[4].A=440,e[4]["A#"]=466.164,e[4].B=493.883,e[5].C=523.251,e[5]["C#"]=554.365,e[5].D=587.33,e[5]["D#"]=622.254,e[5].E=659.255,e[5].F=698.456,e[5]["F#"]=739.989,e[5].G=783.991,e[5]["G#"]=830.609,e[5].A=880,e[5]["A#"]=932.328,e[5].B=987.767,e[6].C=1046.502,e[6]["C#"]=1108.731,e[6].D=1174.659,e[6]["D#"]=1244.508,e[6].E=1318.51,e[6].F=1396.913,e[6]["F#"]=1479.978,e[6].G=1567.982,e[6]["G#"]=1661.219,e[6].A=1760,e[6]["A#"]=1864.655,e[6].B=1975.533,e[7].C=2093.005,e[7]["C#"]=2217.461,e[7].D=2349.318,e[7]["D#"]=2489.016,e[7].E=2637.021,e[7].F=2793.826,e[7]["F#"]=2959.955,e[7].G=3135.964,e[7]["G#"]=3322.438,e[7].A=3520,e[7]["A#"]=3729.31,e[7].B=3951.066,e[8].C=4186.009}window.addEventListener("resize",y);
